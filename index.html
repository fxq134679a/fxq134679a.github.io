<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no"/>
<title>æ¨¡æ‹Ÿæ‰‹æœº</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#e5e5e5;font-family:-apple-system,BlinkMacSystemFont;display:flex;justify-content:center;padding:30px 0}
.phone{width:390px;height:780px;background:#000;border-radius:42px;padding:6px;position:relative}

/* æ¡Œå® å®¹å™¨ï¼ˆå±å¹•å¤–ä¸Šæ–¹ï¼‰ */
.pet-container{
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  top:-40px;               /* å±å¹•å¤–ä¸Šæ–¹ */
  width:72px;
  height:72px;
  z-index:40;
  pointer-events:none;     /* ä¸æ‹¦æˆªç‚¹å‡» */
}
/* è¿™é‡Œå»æ‰ä»»ä½•åº•è‰²/æœ‰è‰²å—ï¼šåªä¿ç•™å›¾ç‰‡ï¼ˆå¦‚æœæœ‰ï¼‰ */
.pet-box{
  width:100%;
  height:100%;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
  background:transparent;  /* å…³é”®ï¼šæ²¡æœ‰è‰²å— */
  box-shadow:none;         /* å»æ‰é˜´å½±ä»¥å…çœ‹èµ·æ¥åƒè‰²å—ï¼ˆå¯åˆ ï¼‰ */
}
.pet-box img{width:100%;height:100%;object-fit:contain;display:block}

/* å±å¹• */
.screen{width:100%;height:100%;border-radius:36px;overflow:hidden;position:relative;background-size:cover;background-position:center;background-repeat:no-repeat}

/* åˆ˜æµ· */
.notch{position:absolute;top:6px;left:50%;transform:translateX(-50%);width:130px;height:34px;background:#000;border-radius:18px;z-index:20}

/* çŠ¶æ€æ  */
.status-bar{height:44px;padding:0 14px;display:flex;align-items:center;justify-content:space-between;font-size:16px;font-weight:600;position:absolute;top:0;left:0;right:0;z-index:10}
.status-time{margin-left:18px}.status-right{display:flex;gap:6px}.status-right img{height:14px}

/* ä¸»å± */
.home{width:100%;height:100%;padding:60px 20px 80px}
.apps{display:grid;grid-template-columns:repeat(4,1fr);gap:20px}
.app-item{text-align:center;font-size:12px;cursor:pointer}
.app-name{color:#000}
.app{width:64px;height:64px;border-radius:14px;margin:0 auto 6px;display:flex;align-items:center;justify-content:center;overflow:hidden}
.app img{width:100%;height:100%;object-fit:cover}
.wechat-app{background:#07c160;color:#fff;font-size:28px}

/* é¡µé¢ */
.page{width:100%;height:100%;display:none;flex-direction:column;background:#f2f2f2;padding-top:44px}

/* Header */
.header{height:44px;background:#ededed;display:flex;align-items:center;justify-content:center;position:relative;font-size:17px;font-weight:600}
.header-left,.header-right{position:absolute;top:0;height:44px;display:flex;align-items:center;padding:0 14px;font-size:22px;cursor:pointer}
.header-left{left:0}.header-right{right:0}

/* æœç´¢ */
.wechat-search{padding:8px 12px;background:#ededed}
.wechat-search-box{height:36px;background:#e0e0e0;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:14px;color:#888}

/* åˆ—è¡¨ */
.list{flex:1;overflow:auto}
.item{background:#fff;padding:14px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center}

/* Tabs */
.tabs{height:60px;display:flex;border-top:1px solid #ddd;background:#fff}
.tab{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:11px;color:#333}
.tab-icon{font-size:22px;margin-bottom:2px}
.tab.active{color:#07c160}

/* æˆ‘ */
.profile{background:#fff;padding:20px;display:flex;align-items:center}
.avatar{width:60px;height:60px;border-radius:50%;background:#ccc;margin-right:14px;overflow:hidden}
.avatar img{width:100%;height:100%;object-fit:cover}
.name{font-size:18px}
.wxid{font-size:12px;color:#888;margin-top:4px}

/* è®¾ç½®é¡¹ */
.setting-item{background:#fff;padding:14px;border-bottom:1px solid #eee}
.setting-item input{margin-top:10px;width:100%}

/* ä¸»å±è®¾ç½®appé¡µé¢æ§ä»¶ */
.home-settings-list{padding:10px}
.home-settings-row{background:#fff;padding:14px;margin-bottom:8px;border-radius:8px;display:flex;align-items:center;justify-content:space-between}
.home-settings-row label{font-size:14px;color:#222}
.home-settings-row input[type="file"]{font-size:12px}

/* åŠ å·å¼¹çª—ï¼ˆé€æ˜é®ç½©ï¼Œä¸æ”¹å˜åº•è‰²ï¼‰ */
.plus-mask{position:absolute;inset:0;background:transparent;display:none;pointer-events:none;z-index:50}
.plus-mask.show{display:block;pointer-events:auto}
.plus-panel{position:absolute;top:56px;right:12px;width:180px;background:#4a4a4a;border-radius:10px;overflow:hidden;box-shadow:0 6px 18px rgba(0,0,0,0.25)}
.plus-item{padding:14px;color:#fff;display:flex;align-items:center;gap:10px;border-bottom:1px solid rgba(255,255,255,.12)}
.plus-item:last-child{border-bottom:none}
.plus-item:active{opacity:.6}
</style>
</head>
<body>
<div class="phone">

  <!-- æ¡Œå® ï¼ˆå±å¹•å¤–ä¸Šæ–¹ï¼‰ -->
  <div class="pet-container" id="petContainer" aria-hidden="true">
    <div class="pet-box" id="petBox">
      <!-- é»˜è®¤ç©ºæˆ–æœ¬åœ°å›¾ç‰‡ -->
    </div>
  </div>

  <div class="screen" id="screen">
    <div class="notch"></div>

    <div class="status-bar">
      <div id="time" class="status-time">00:00</div>
      <div class="status-right">
        <img src="https://img.heliar.top/file/1768515766612_IMG_3349.png" alt="net">
        <img src="https://img.heliar.top/file/1768516105836_IMG_3350.png" alt="bat">
      </div>
    </div>

    <!-- ä¸»å± -->
    <div class="home" id="home">
      <div class="apps">
        <div class="app-item" onclick="openWeChat()">
          <div class="app wechat-app" id="wechatIcon">ğŸ’¬</div>
          <div class="app-name">Wechat</div>
        </div>

        <div class="app-item" onclick="openHomeSettings()">
          <div class="app" id="homeSettingsIcon" style="background:#f0f0f0">âš™ï¸</div>
          <div class="app-name">è®¾ç½®</div>
        </div>

        <div></div><div></div>
      </div>
    </div>

    <!-- Wechat é¡µé¢ -->
    <div class="page" id="wechat">
      <div class="header">
        <div class="header-left" onclick="backHome()">âœ©</div>
        Wechat
        <div class="header-right" id="plusBtn" onclick="openPlus()">ï¼‹</div>
      </div>

      <div class="wechat-search" id="wechatSearch">
        <div class="wechat-search-box">ğŸ” æœç´¢</div>
      </div>

      <div class="list" id="wechatContent"></div>

      <div class="tabs" id="wechatTabs">
        <div class="tab active" data-tab="chat" onclick="switchTab('chat', this)"><div class="tab-icon">ğŸ’¬</div><div>å¾®ä¿¡</div></div>
        <div class="tab" data-tab="contact" onclick="switchTab('contact', this)"><div class="tab-icon">ğŸ‘¥</div><div>é€šè®¯å½•</div></div>
        <div class="tab" data-tab="find" onclick="switchTab('find', this)"><div class="tab-icon">ğŸ§­</div><div>å‘ç°</div></div>
        <div class="tab" data-tab="me" onclick="switchTab('me', this)"><div class="tab-icon">ğŸ‘¤</div><div>æˆ‘</div></div>
      </div>
    </div>

    <!-- ä¸»å±è®¾ç½®åº”ç”¨ -->
    <div class="page" id="homeSettings">
      <div class="header">
        <div class="header-left" onclick="backHome()">â€¹</div>
        è®¾ç½®
      </div>
      <div class="list home-settings-list">
        <div class="home-settings-row">
          <label>ä¿®æ”¹ä¸»å±å¹•å£çº¸</label>
          <input type="file" accept="image/*" onchange="setWallpaper(this)">
        </div>

        <div class="home-settings-row">
          <label>ä¿®æ”¹ Wechat å›¾æ ‡</label>
          <input type="file" accept="image/*" onchange="setWeChatIcon(this)">
        </div>

        <div class="home-settings-row">
          <label>ä¿®æ”¹ è®¾ç½® å›¾æ ‡</label>
          <input type="file" accept="image/*" onchange="setHomeSettingsIcon(this)">
        </div>

        <div class="home-settings-row">
          <label>ä¿®æ”¹æ‰‹æœºæ¡Œå® </label>
          <input type="file" accept="image/*" onchange="setPetImage(this)">
        </div>
      </div>
    </div>

    <!-- æˆ‘ â†’ è®¾ç½®ï¼ˆä¿ç•™æ˜µç§°/å·/å¤´åƒï¼‰ -->
    <div class="page" id="setting">
      <div class="header">
        <div class="header-left" onclick="backMe()">â€¹</div>
        è®¾ç½®
      </div>
      <div class="list" id="settingList">
        <div class="setting-item">ä¿®æ”¹å¾®ä¿¡æ˜µç§°<input type="text" oninput="setNickname(this.value)"></div>
        <div class="setting-item">ä¿®æ”¹å¾®ä¿¡å·<input type="text" oninput="setWxId(this.value)"></div>
        <div class="setting-item">ä¿®æ”¹å¤´åƒ<input type="file" accept="image/*" onchange="setAvatar(this)"></div>
      </div>
    </div>

    <!-- åŠ å·å¼¹çª—ï¼ˆé€æ˜é®ç½©ï¼Œä¸æ”¹å˜é¡µé¢äº®åº¦ï¼‰ -->
    <div class="plus-mask" id="plusMask" onclick="closePlus()">
      <div class="plus-panel" onclick="event.stopPropagation()">
        <div class="plus-item" onclick="startGroup()">ğŸ’¬ å‘èµ·ç¾¤èŠ</div>
        <div class="plus-item" onclick="addFriend()">ğŸ‘¤ æ·»åŠ æœ‹å‹</div>
      </div>
    </div>

  </div>
</div>

<script>
/* é»˜è®¤èµ„æº */
const DEFAULT_WALLPAPER = 'https://img.heliar.top/file/1768536593797_IMG_3117.jpeg';
const DEFAULT_WECHAT_ICON = 'https://img.heliar.top/file/1768536596905_IMG_2757.jpeg';
const DEFAULT_NICKNAME = 'user';

function updateTime(){ const n=new Date(); time.innerText = String(n.getHours()).padStart(2,'0') + ':' + String(n.getMinutes()).padStart(2,'0'); }
updateTime(); setInterval(updateTime,1000);

/* refs */
const screen = document.getElementById('screen');
const home = document.getElementById('home');
const wechat = document.getElementById('wechat');
const setting = document.getElementById('setting');
const homeSettings = document.getElementById('homeSettings');
const content = document.getElementById('wechatContent');
const wechatSearch = document.getElementById('wechatSearch');
const plusMask = document.getElementById('plusMask');
const wechatTabs = document.getElementById('wechatTabs');
const wechatIconEl = document.getElementById('wechatIcon');
const homeSettingsIconEl = document.getElementById('homeSettingsIcon');
const petBox = document.getElementById('petBox');

let nickname = localStorage.getItem('nickname') || DEFAULT_NICKNAME;
let wxId = localStorage.getItem('wxid') || 'Bubu120vO';
let avatar = localStorage.getItem('avatar') || '';

/* åˆå§‹åŒ–å£çº¸ä¸å›¾æ ‡ */
if(localStorage.getItem('wallpaper')) screen.style.backgroundImage = `url(${localStorage.getItem('wallpaper')})`; else screen.style.backgroundImage = `url(${DEFAULT_WALLPAPER})`;
if(localStorage.getItem('wechatIcon')) wechatIconEl.innerHTML = `<img src="${localStorage.getItem('wechatIcon')}" alt="icon">`; else wechatIconEl.innerHTML = `<img src="${DEFAULT_WECHAT_ICON}" alt="icon">`;
if(localStorage.getItem('homeSettingsIcon')) homeSettingsIconEl.innerHTML = `<img src="${localStorage.getItem('homeSettingsIcon')}" alt="home-settings">`;

/* æ¡Œå® åˆå§‹åŒ–ï¼ˆæ³¨æ„ï¼šä¸æ’å…¥ä»»ä½•å ä½è‰²å—ï¼‰ */
if(localStorage.getItem('petImage')){
  petBox.innerHTML = `<img src="${localStorage.getItem('petImage')}" alt="pet">`;
}

/* é¡µé¢æ§åˆ¶ */
function hideAllPages(){ document.querySelectorAll('.page').forEach(p=>p.style.display='none'); home.style.display='none'; }
function openWeChat(){ hideAllPages(); wechat.style.display='flex'; switchTab('chat', wechatTabs.querySelector('[data-tab="chat"]')); }
function backHome(){ hideAllPages(); home.style.display='block'; }
function openSetting(){ hideAllPages(); setting.style.display='flex'; }
function backMe(){ hideAllPages(); wechat.style.display='flex'; switchTab('me', wechatTabs.querySelector('[data-tab="me"]')); }
function openHomeSettings(){ hideAllPages(); homeSettings.style.display='flex'; }

/* tabs åˆ‡æ¢ */
function switchTab(name, el){
  wechatTabs.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  if(el) el.classList.add('active');

  if(name === 'chat'){
    wechatSearch.style.display = 'block';
    content.innerHTML = `<div style="padding:18px;color:#888;text-align:center">ç›®å‰æ— èŠå¤©</div>`;
  } else {
    wechatSearch.style.display = 'none';
    if(name === 'contact'){
      content.innerHTML = `<div class="item">è”ç³»äºº A <span style="color:#999">â€º</span></div><div class="item">è”ç³»äºº B <span style="color:#999">â€º</span></div>`;
    } else if(name === 'find'){
      content.innerHTML = `<div class="item">å‘ç° - åŠŸèƒ½å…¥å£1<span>â€º</span></div><div class="item">å‘ç° - åŠŸèƒ½å…¥å£2<span>â€º</span></div>`;
    } else if(name === 'me'){
      renderMe();
    } else {
      content.innerHTML = `<div class="item">${name} é¡µé¢</div>`;
    }
  }
}

/* æˆ‘ é¡µ */
function renderMe(){
  content.innerHTML = `
    <div class="profile">
      <div class="avatar">${avatar?`<img src="${avatar}" alt="avatar">`:''}</div>
      <div>
        <div class="name">${nickname}</div>
        <div class="wxid">å¾®ä¿¡å·ï¼š${wxId}</div>
      </div>
    </div>
    <div class="item">æœ‹å‹åœˆ<span>â€º</span></div>
    <div class="item">è¡¨æƒ…<span>â€º</span></div>
    <div class="item" onclick="openSetting()">è®¾ç½®<span>â€º</span></div>
  `;
}

/* è®¾ç½®ï¼ˆä¿ç•™æ˜µç§°/å·/å¤´åƒï¼‰ */
function setNickname(v){ nickname = v; localStorage.setItem('nickname', v); renderMe(); }
function setWxId(v){ wxId = v; localStorage.setItem('wxid', v); renderMe(); }
function setAvatar(input){
  if(!input.files || !input.files[0]) return;
  const r = new FileReader();
  r.onload = e => { avatar = e.target.result; localStorage.setItem('avatar', avatar); renderMe(); };
  r.readAsDataURL(input.files[0]);
}

/* ä¸»å±è®¾ç½®ï¼šå£çº¸ / Wechat å›¾æ ‡ / è®¾ç½®å›¾æ ‡ / æ¡Œå®  */
function setWallpaper(input){
  if(!input.files || !input.files[0]) return;
  const r = new FileReader();
  r.onload = e => { screen.style.backgroundImage = `url(${e.target.result})`; localStorage.setItem('wallpaper', e.target.result); };
  r.readAsDataURL(input.files[0]);
}
function setWeChatIcon(input){
  if(!input.files || !input.files[0]) return;
  const r = new FileReader();
  r.onload = e => { wechatIconEl.innerHTML = `<img src="${e.target.result}" alt="icon">`; localStorage.setItem('wechatIcon', e.target.result); };
  r.readAsDataURL(input.files[0]);
}
function setHomeSettingsIcon(input){
  if(!input.files || !input.files[0]) return;
  const r = new FileReader();
  r.onload = e => { homeSettingsIconEl.innerHTML = `<img src="${e.target.result}" alt="home-settings">`; localStorage.setItem('homeSettingsIcon', e.target.result); };
  r.readAsDataURL(input.files[0]);
}
/* æ–°å¢ï¼šè®¾ç½®æ¡Œå® ï¼ˆä¸ç”Ÿæˆä»»ä½•é»˜è®¤èƒŒæ™¯ï¼‰ */
function setPetImage(input){
  if(!input.files || !input.files[0]) return;
  const r = new FileReader();
  r.onload = e => {
    petBox.innerHTML = `<img src="${e.target.result}" alt="pet">`;
    localStorage.setItem('petImage', e.target.result);
  };
  r.readAsDataURL(input.files[0]);
}

/* åŠ å·å¼¹çª—ï¼ˆé€æ˜é®ç½©ï¼Œä¸æ”¹å˜é¡µé¢äº®åº¦ï¼‰*/
function openPlus(){ plusMask.classList.add('show'); }
function closePlus(){ plusMask.classList.remove('show'); }
function startGroup(){ closePlus(); alert('å‘èµ·ç¾¤èŠï¼ˆç¤ºä¾‹ï¼‰'); }
function addFriend(){ closePlus(); alert('æ·»åŠ æœ‹å‹ï¼ˆç¤ºä¾‹ï¼‰'); }

/* init */
hideAllPages = function(){ document.querySelectorAll('.page').forEach(p=>p.style.display='none'); home.style.display='none'; };
hideAllPages();
home.style.display = 'block';
</script>
</body>
</html>